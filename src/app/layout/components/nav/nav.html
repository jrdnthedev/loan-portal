<nav>
  <div id="nav-brand">
    <h2><a routerLink="/" (click)="closeMenu()">Loan Application</a></h2>
  </div>

  <!-- Mobile menu button -->
  <button
    id="mobile-menu-btn"
    (click)="toggleMenu()"
    [attr.aria-expanded]="isMenuOpen()"
    aria-label="Toggle navigation menu"
  >
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
  </button>

  <!-- Navigation menu -->
  <ul id="nav-menu" [class.nav-menu-open]="isMenuOpen()">
    @if (authService.authState().isAuthenticated) {
      <li>
        <a routerLink="/loan-application/wizard" (click)="closeMenu()">Loan Application Wizard</a>
      </li>
      <li><a routerLink="/underwriting" (click)="closeMenu()">Underwriting Panel</a></li>
      <li><a routerLink="/admin" (click)="closeMenu()">Admin</a></li>
      <li>
        <a (click)="closeMenu(); authService.logout()"
          >Logout, {{ authService.user()?.firstName }}</a
        >
      </li>
    } @else {
      <li><a (click)="openLogin()">Login</a></li>
      <li><a (click)="openRegister()">Register</a></li>
    }
  </ul>
</nav>

@if (isLoginModalOpen()) {
  <app-modal name="login-modal" (closeBtn)="closeLogin()">
    <app-login (loginSuccess)="closeLogin()"></app-login>
  </app-modal>
}

@if (isRegisterModalOpen()) {
  <app-modal name="register-modal" (closeBtn)="closeRegister()">
    <app-register (registerSuccess)="closeRegister()"></app-register>
  </app-modal>
}
